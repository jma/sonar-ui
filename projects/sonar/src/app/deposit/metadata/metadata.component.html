<!--
  SONAR User Interface
  Copyright (C) 2021 RERO

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, version 3 of the License.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
@if(deposit()) {
<sonar-deposit-step [maxStep]="maxStep" [steps]="steps" />
@if(currentStep === 'diffusion') {
<sonar-deposit-review [deposit]="deposit()" />
}

<!--- form -->
<p-tabView [(activeIndex)]="activeIndex">
  <p-tabPanel [header]="'Editor' | translate">
    <sonar-deposit-editor
      [deposit]="deposit()"
      [currentStep]="currentStep"
      [steps]="steps"
      [mainFile]="mainFile()"
    />
  </p-tabPanel>

  <p-tabPanel [header]="'JSON' | translate">
    <!-- JSON -->
    <ng-template pTemplate="content">
      <pre class="p-3" [innerHTML]="deposit() | json | highlightJson"></pre>
    </ng-template>
  </p-tabPanel>

  @if(mainFile()) {
  <p-tabPanel [header]="'Files' | translate">
    <sonar-deposit-files
      [mainFile]="mainFile()"
      [depositPid]="deposit().pid"
      [additionalFiles]="additionalFiles()"
    />
  </p-tabPanel>
  }
</p-tabView>
}
